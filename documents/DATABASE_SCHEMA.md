# FounderFlow Database Schema Documentation

## Overview
This database is architected specifically for the **FounderFlow** platform, optimized for founder-centric workflows including idea validation, roadmap planning, and task execution.

**Database Type:** Google Cloud Firestore (NoSQL)
**SDK:** Firebase Modular SDK (Client) + Firebase Admin SDK (Server)

## Core Schema (Founder Only)

### 1. Users (`users`)
Stores profile information for all registered founders.
- `uid` (PK): Firebase Auth ID
- `role`: "founder" | "admin" (Strictly enforced)
- `activeStartupId`: ID of the currently selected workspace
- `email`, `displayName`, `photoURL`: Standard auth fields
- `createdAt`, `lastLoginAt`: Timestamps

### 2. Startups (`startups`)
The central entity representing a Founder's project.
- `startupId` (PK): Auto-generated
- `ownerId`: Reference to `users.uid`
- `name`: Startup Name
- `industry`: Industry category
- `stage`: "idea_submitted" -> "growth" (Lifecycle)
- `idea`: The core one-liner
- `vision`: Long-term vision text
- `createdAt`, `updatedAt`: Timestamps

### 3. Startup Members (`startup_members`)
Junction collection managing access to Startups.
- `startupId`: Reference to `startups`
- `userId`: Reference to `users`
- `role`: "owner" | "cofounder" | "team" | "mentor"
- `joinedAt`: Timestamp

### 4. Tasks (`tasks`)
Actionable items generated by AI or created manually.
- `id` (PK): Auto-generated
- `startupId`: Reference to `startups`
- `title`, `description`: Task details
- `status`: "pending" | "done"
- `priority`: "high" | "medium" | "low"
- `createdByAgent`: Name of the AI agent (if applicable)

### 5. Startup Memory (`startupMemory`)
Context storage for AI Agents to recall decisions and history.
- `startupId`: Reference to `startups`
- `type`: "idea" | "decision" | "pivot" | "agent-output"
- `content`: Text content
- `timestamp`: Time of event

### 6. Agent Runs (`agentRuns`)
Audit log of AI Agent executions.
- `startupId`: Reference to `startups`
- `agentType`: "validator" | "planner" | "executor"
- `status`: "running" | "success" | "failure"
- `result`: Outcome summary

### 7. Connections (`connections`)
Graph of social connections between founders.
- `users`: Array of two `uid` strings [uid1, uid2]
- `status`: "ACTIVE"
- `createdAt`: Timestamp

### 8. Connection Requests (`connection_requests`)
Pending invitations between founders.
- `from`, `to`: User IDs
- `status`: "pending" | "accepted" | "rejected"
- `createdAt`: Timestamp

### 9. Chat (`chat_rooms` & `chats/{id}/messages`)
Real-time messaging system.
- **Rooms**: Metadata (participants, lastMessage)
- **Messages**: Individual text payloads

## Removed Schemas (Cleanup Audit)
The following legacy collections have been **permanently removed** to streamline the architecture:
- ❌ `dealflow` (Investor legacy)
- ❌ `project_connections` (Redundant)
- ❌ `deal_ai_analysis` (Investor legacy)

## Indexing Strategy
Composite indexes are enforced for high-performance querying of:
- Startup Dashboards (`startupId` + `timestamp` DESC)
- Task Boards (`startupId` + `priority` + `status`)
- Connection Feeds (`to` + `status`)

## Security Rules (Implicit)
- Users can only read/write data for Startups they are a member of.
- Admins have full read/write access.
